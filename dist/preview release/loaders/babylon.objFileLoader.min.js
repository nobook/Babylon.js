<<<<<<< HEAD
<<<<<<< HEAD
var BABYLON;!(function(e){var t=(function(){function t(){this.materials=[],this.parseMTL=function(s,r,n){for(var i,a,o=r.split("\n"),l=/\s+/,u=0;u<o.length;u++){var p=o[u].trim();if(0!==p.length&&"#"!==p.charAt(0)){var h=p.indexOf(" "),f=h>=0?p.substring(0,h):p;f=f.toLowerCase();var m=h>=0?p.substring(h+1).trim():"";"newmtl"===f?(a&&this.materials.push(a),a=new e.StandardMaterial(m,s)):"kd"===f?(i=m.split(l,3),a.diffuseColor=e.Color3.FromArray(i)):"ka"===f?(i=m.split(l,3),a.ambientColor=e.Color3.FromArray(i)):"ks"===f?(i=m.split(l,3),a.specularColor=e.Color3.FromArray(i)):"ns"===f?a.specularPower=m:"d"===f?a.alpha=m:"map_ka"===f?a.ambientTexture=t._getTexture(n,m,s):"map_kd"===f?a.diffuseTexture=t._getTexture(n,m,s):"map_ks"===f?a.specularTexture=t._getTexture(n,m,s):"map_ns"===f||("map_bump"===f?a.bumpTexture=t._getTexture(n,m,s):"map_d"===f&&(a.opacityTexture=t._getTexture(n,m,s)))}}this.materials.push(a)}}return t._getTexture=function(t,s,r){var n=t;if("file:"===t){var i=s.lastIndexOf("\\");-1===i&&(i=s.lastIndexOf("/")),n+=i>-1?s.substr(i+1):s}else n+=s;return new e.Texture(n,r)},t})();e.MTLFileLoader=t;var s=(function(){function s(){this.extensions=".obj",this.obj=/^o/,this.group=/^g/,this.mtllib=/^mtllib /,this.usemtl=/^usemtl /,this.smooth=/^s /,this.vertexPattern=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.normalPattern=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.uvPattern=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.facePattern1=/f\s+(([\d]{1,}[\s]?){3,})+/,this.facePattern2=/f\s+((([\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,this.facePattern3=/f\s+((([\d]{1,}\/[\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,this.facePattern4=/f\s+((([\d]{1,}\/\/[\d]{1,}[\s]?){3,})+)/}return s.prototype._loadMTL=function(t,s,r){var n=e.Tools.BaseUrl+s+t;e.Tools.LoadFile(n,r,null,null,!1,(function(){console.warn("Error - Unable to load "+n)}))},s.prototype.importMesh=function(e,t,s,r,n,i,a){var o=this._parseSolid(e,t,s,r);return n&&o.forEach((function(e){n.push(e)})),!0},s.prototype.load=function(e,t,s){return this.importMesh(null,e,t,s,null,null,null)},s.prototype._parseSolid=function(r,n,i,a){for(var o,l=[],u=[],p=[],h=[],f=[],m=[],c=[],d=[],v=[],x=0,g=!1,T=[],_=[],I=[],P=[],b="",y="",F=new t,O=1,w=!0,E=function(e,t){e[t[0]]||(e[t[0]]={normals:[],idx:[]});var s=e[t[0]].normals.indexOf(t[1]);return-1===s?-1:e[t[0]].idx[s]},L=function(e,t){e[t[0]]||(e[t[0]]={normals:[],idx:[],uv:[]});var s=e[t[0]].normals.indexOf(t[1]);return 1!=s&&t[2]==e[t[0]].uv[s]?e[t[0]].idx[s]:-1},M=function(e,t,r,n,i,a){var o;o=s.OPTIMIZE_WITH_UV?L(v,[e,r,t]):E(v,[e,r]),-1==o?(f.push(m.length),m.push(n),c.push(i),d.push(a),v[e].normals.push(r),v[e].idx.push(x++),s.OPTIMIZE_WITH_UV&&v[e].uv.push(t)):f.push(o)},V=function(){for(var e=0;e<m.length;e++)T.push(m[e].x,m[e].y,m[e].z),_.push(d[e].x,d[e].y,d[e].z),I.push(c[e].x,c[e].y);m=[],d=[],c=[],v=[],x=0},A=function(e,t){t+1<e.length&&(P.push(e[0],e[t],e[t+1]),t+=1,A(e,t))},B=function(){h.length>0&&(o=h[h.length-1],V(),f.reverse(),o.indices=f.slice(),o.positions=T.slice(),o.normals=_.slice(),o.uvs=I.slice(),f=[],T=[],_=[],I=[])},N=i.split("\n"),U=0;U<N.length;U++){var C,k=N[U].trim();if(0!==k.length&&"#"!==k.charAt(0))if(null!==(C=this.vertexPattern.exec(k)))l.push(new e.Vector3(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])));else if(null!==(C=this.normalPattern.exec(k)))u.push(new e.Vector3(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])));else if(null!==(C=this.uvPattern.exec(k)))p.push(new e.Vector2(parseFloat(C[1]),parseFloat(C[2])));else if(null!==(C=this.facePattern3.exec(k)))!(function(e,t){A(e,t);for(var s=0;s<P.length;s++){var r=P[s].split("/"),n=parseInt(r[0])-1,i=parseInt(r[1])-1,a=parseInt(r[2])-1;M(n,i,a,l[n],p[i],u[a])}P=[]})(C[1].trim().split(" "),1);else if(null!==(C=this.facePattern4.exec(k)))!(function(t,s){A(t,s);for(var r=0;r<P.length;r++){var n=P[r].split("//"),i=parseInt(n[0])-1,a=parseInt(n[1])-1;M(i,1,a,l[i],e.Vector2.Zero(),u[a])}P=[]})(C[1].trim().split(" "),1);else if(null!==(C=this.facePattern2.exec(k)))!(function(t,s){A(t,s);for(var r=0;r<P.length;r++){var n=P[r].split("/"),i=parseInt(n[0])-1,a=parseInt(n[1])-1;M(i,a,0,l[i],p[a],e.Vector3.Up())}P=[]})(C[1].trim().split(" "),1);else if(null!==(C=this.facePattern1.exec(k)))!(function(t,s){A(t,s);for(var r=0;r<P.length;r++){var n=parseInt(P[r])-1;M(n,0,0,l[n],e.Vector2.Zero(),e.Vector3.Up())}P=[]})(C[1].trim().split(" "),1);else if(this.group.test(k)||this.obj.test(k)){var S={name:k.substring(2).trim(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,materialName:""};B(),h.push(S),g=!0,w=!0,O=1}else if(this.usemtl.test(k)){if(b=k.substring(7).trim(),!w){B();var S={name:"_mm"+O.toString(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,materialName:b};O++,h.push(S)}g&&w&&(h[h.length-1].materialName=b,w=!1)}else this.mtllib.test(k)?y=k.substring(7).trim():this.smooth.test(k)||console.log("Unhandled expression at line : "+k)}g&&(o=h[h.length-1],f.reverse(),V(),o.indices=f,o.positions=T,o.normals=_,o.uvs=I),g||(f.reverse(),V(),h.push({name:e.Geometry.RandomId(),indices:f,positions:T,normals:_,uvs:I,materialName:b}));for(var Z=[],j=[],H=0;H<h.length;H++){if(r&&h[H].name)if(r instanceof Array){if(-1==r.indexOf(h[H].name))continue}else if(h[H].name!==r)continue;o=h[H];var W=new e.Mesh(h[H].name,n);j.push(h[H].materialName);var Y=new e.VertexData;Y.positions=o.positions,Y.normals=o.normals,Y.uvs=o.uvs,Y.indices=o.indices,Y.applyToMesh(W),Z.push(W)}return""!==y&&this._loadMTL(y,a,(function(e){F.parseMTL(n,e,a);for(var t=0;t<F.materials.length;t++){for(var s,r=0,i=[];(s=j.indexOf(F.materials[t].name,r))>-1;)i.push(s),r=s+1;if(-1==s&&0==i.length)F.materials[t].dispose();else for(var o=0;o<i.length;o++)Z[i[o]].material=F.materials[t]}})),Z},s})();s.OPTIMIZE_WITH_UV=!1,e.OBJFileLoader=s,e.SceneLoader.RegisterPlugin(new s)})(BABYLON||(BABYLON={}));
=======
var BABYLON;!(function(e){var t=(function(){function t(){this.materials=[],this.parseMTL=function(s,r,n){for(var i,a,o=r.split("\n"),l=0;l<o.length;l++){var u=o[l].trim();if(0!==u.length&&"#"!==u.charAt(0)){var p=u.indexOf(" "),h=p>=0?u.substring(0,p):u;h=h.toLowerCase();var f=p>=0?u.substring(p+1).trim():"";"newmtl"===h?(a&&this.materials.push(a),a=new e.StandardMaterial(f,s)):"kd"===h?(i=f.split(/\s+/,3),a.diffuseColor=e.Color3.FromArray(i)):"ka"===h?(i=f.split(/\s+/,3),a.ambientColor=e.Color3.FromArray(i)):"ks"===h?(i=f.split(/\s+/,3),a.specularColor=e.Color3.FromArray(i)):"ns"===h?a.specularPower=f:"d"===h?a.alpha=f:"map_ka"===h?a.ambientTexture=t._getTexture(n,f,s):"map_kd"===h?a.diffuseTexture=t._getTexture(n,f,s):"map_ks"===h?a.specularTexture=t._getTexture(n,f,s):"map_ns"===h||("map_bump"===h?a.bumpTexture=t._getTexture(n,f,s):"map_d"===h&&(a.opacityTexture=t._getTexture(n,f,s)))}}this.materials.push(a)}}return t._getTexture=function(t,s,r){var n=t;if("file:"===t){var i=s.lastIndexOf("\\");-1===i&&(i=s.lastIndexOf("/")),n+=i>-1?s.substr(i+1):s}else n+=s;return new e.Texture(n,r)},t})();e.MTLFileLoader=t;var s=(function(){function s(){this.extensions=".obj",this.obj=/^o/,this.group=/^g/,this.mtllib=/^mtllib /,this.usemtl=/^usemtl /,this.smooth=/^s /,this.vertexPattern=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.normalPattern=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.uvPattern=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.facePattern1=/f\s+(([\d]{1,}[\s]?){3,})+/,this.facePattern2=/f\s+((([\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,this.facePattern3=/f\s+((([\d]{1,}\/[\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,this.facePattern4=/f\s+((([\d]{1,}\/\/[\d]{1,}[\s]?){3,})+)/}return s.prototype._loadMTL=function(t,s,r){var n=e.Tools.BaseUrl+s+t;e.Tools.LoadFile(n,r,null,null,!1,(function(){console.warn("Error - Unable to load "+n)}))},s.prototype.importMesh=function(e,t,s,r,n,i,a){var o=this._parseSolid(e,t,s,r);return n&&o.forEach((function(e){n.push(e)})),!0},s.prototype.load=function(e,t,s){return this.importMesh(null,e,t,s,null,null,null)},s.prototype._parseSolid=function(r,n,i,a){for(var o,l=[],u=[],p=[],h=[],f=[],m=[],c=[],d=[],v=[],x=0,g=!1,T=[],_=[],I=[],P=[],b="",y="",F=new t,L=1,O=!0,w=function(e,t){e[t[0]]||(e[t[0]]={normals:[],idx:[]});var s=e[t[0]].normals.indexOf(t[1]);return-1===s?-1:e[t[0]].idx[s]},E=function(e,t){e[t[0]]||(e[t[0]]={normals:[],idx:[],uv:[]});var s=e[t[0]].normals.indexOf(t[1]);return 1!=s&&t[2]==e[t[0]].uv[s]?e[t[0]].idx[s]:-1},M=function(e,t,r,n,i,a){var o;o=s.OPTIMIZE_WITH_UV?E(v,[e,r,t]):w(v,[e,r]),-1==o?(f.push(m.length),m.push(n),c.push(i),d.push(a),v[e].normals.push(r),v[e].idx.push(x++),s.OPTIMIZE_WITH_UV&&v[e].uv.push(t)):f.push(o)},V=function(){for(var e=0;e<m.length;e++)T.push(m[e].x,m[e].y,m[e].z),_.push(d[e].x,d[e].y,d[e].z),I.push(c[e].x,c[e].y);m=[],d=[],c=[],v=[],x=0},A=function(e,t){t+1<e.length&&(P.push(e[0],e[t],e[t+1]),t+=1,A(e,t))},B=function(){h.length>0&&(o=h[h.length-1],V(),f.reverse(),o.indices=f.slice(),o.positions=T.slice(),o.normals=_.slice(),o.uvs=I.slice(),f=[],T=[],_=[],I=[])},N=i.split("\n"),U=0;U<N.length;U++){var C,k=N[U].trim();if(0!==k.length&&"#"!==k.charAt(0))if(null!==(C=this.vertexPattern.exec(k)))l.push(new e.Vector3(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])));else if(null!==(C=this.normalPattern.exec(k)))u.push(new e.Vector3(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])));else if(null!==(C=this.uvPattern.exec(k)))p.push(new e.Vector2(parseFloat(C[1]),parseFloat(C[2])));else if(null!==(C=this.facePattern3.exec(k)))!(function(e,t){A(e,t);for(var s=0;s<P.length;s++){var r=P[s].split("/"),n=parseInt(r[0])-1,i=parseInt(r[1])-1,a=parseInt(r[2])-1;M(n,i,a,l[n],p[i],u[a])}P=[]})(C[1].trim().split(" "),1);else if(null!==(C=this.facePattern4.exec(k)))!(function(t,s){A(t,s);for(var r=0;r<P.length;r++){var n=P[r].split("//"),i=parseInt(n[0])-1,a=parseInt(n[1])-1;M(i,1,a,l[i],e.Vector2.Zero(),u[a])}P=[]})(C[1].trim().split(" "),1);else if(null!==(C=this.facePattern2.exec(k)))!(function(t,s){A(t,s);for(var r=0;r<P.length;r++){var n=P[r].split("/"),i=parseInt(n[0])-1,a=parseInt(n[1])-1;M(i,a,0,l[i],p[a],e.Vector3.Up())}P=[]})(C[1].trim().split(" "),1);else if(null!==(C=this.facePattern1.exec(k)))!(function(t,s){A(t,s);for(var r=0;r<P.length;r++){var n=parseInt(P[r])-1;M(n,0,0,l[n],e.Vector2.Zero(),e.Vector3.Up())}P=[]})(C[1].trim().split(" "),1);else if(this.group.test(k)||this.obj.test(k)){var S={name:k.substring(2).trim(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,materialName:""};B(),h.push(S),g=!0,O=!0,L=1}else if(this.usemtl.test(k)){if(b=k.substring(7).trim(),!O){B();var S={name:"_mm"+L.toString(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,materialName:b};L++,h.push(S)}g&&O&&(h[h.length-1].materialName=b,O=!1)}else this.mtllib.test(k)?y=k.substring(7).trim():this.smooth.test(k)||console.log("Unhandled expression at line : "+k)}g&&(o=h[h.length-1],f.reverse(),V(),o.indices=f,o.positions=T,o.normals=_,o.uvs=I),g||(f.reverse(),V(),h.push({name:e.Geometry.RandomId(),indices:f,positions:T,normals:_,uvs:I,materialName:b}));for(var Z=[],j=[],H=0;H<h.length;H++){if(r&&h[H].name)if(r instanceof Array){if(-1==r.indexOf(h[H].name))continue}else if(h[H].name!==r)continue;o=h[H];var W=new e.Mesh(h[H].name,n);j.push(h[H].materialName);var Y=new e.VertexData;Y.positions=o.positions,Y.normals=o.normals,Y.uvs=o.uvs,Y.indices=o.indices,Y.applyToMesh(W),Z.push(W)}return""!==y&&this._loadMTL(y,a,(function(e){F.parseMTL(n,e,a);for(var t=0;t<F.materials.length;t++){for(var s,r=0,i=[];(s=j.indexOf(F.materials[t].name,r))>-1;)i.push(s),r=s+1;if(-1==s&&0==i.length)F.materials[t].dispose();else for(var o=0;o<i.length;o++)Z[i[o]].material=F.materials[t]}})),Z},s})();s.OPTIMIZE_WITH_UV=!1,e.OBJFileLoader=s,e.SceneLoader&&e.SceneLoader.RegisterPlugin(new s)})(BABYLON||(BABYLON={}));
>>>>>>> v3.0.7
=======
var BABYLON;!(function(e){var t=(function(){function t(){this.materials=[]}return t.prototype.parseMTL=function(r,s,a){for(var n,i=s.split("\n"),o=null,l=0;l<i.length;l++){var u=i[l].trim();if(0!==u.length&&"#"!==u.charAt(0)){var p=u.indexOf(" "),h=p>=0?u.substring(0,p):u;h=h.toLowerCase();var m=p>=0?u.substring(p+1).trim():"";"newmtl"===h?(o&&this.materials.push(o),o=new e.StandardMaterial(m,r)):"kd"===h&&o?(n=m.split(/\s+/,3).map(parseFloat),o.diffuseColor=e.Color3.FromArray(n)):"ka"===h&&o?(n=m.split(/\s+/,3).map(parseFloat),o.ambientColor=e.Color3.FromArray(n)):"ks"===h&&o?(n=m.split(/\s+/,3).map(parseFloat),o.specularColor=e.Color3.FromArray(n)):"ke"===h&&o?(n=m.split(/\s+/,3).map(parseFloat),o.emissiveColor=e.Color3.FromArray(n)):"ns"===h&&o?o.specularPower=parseFloat(m):"d"===h&&o?o.alpha=parseFloat(m):"map_ka"===h&&o?o.ambientTexture=t._getTexture(a,m,r):"map_kd"===h&&o?o.diffuseTexture=t._getTexture(a,m,r):"map_ks"===h&&o?o.specularTexture=t._getTexture(a,m,r):"map_ns"===h||("map_bump"===h&&o?o.bumpTexture=t._getTexture(a,m,r):"map_d"===h&&o&&(o.opacityTexture=t._getTexture(a,m,r)))}}o&&this.materials.push(o)},t._getTexture=function(t,r,s){if(!r)return null;var a=t;if("file:"===t){var n=r.lastIndexOf("\\");-1===n&&(n=r.lastIndexOf("/")),a+=n>-1?r.substr(n+1):r}else a+=r;return new e.Texture(a,s)},t})();e.MTLFileLoader=t;var r=(function(){function r(){this.name="obj",this.extensions=".obj",this.obj=/^o/,this.group=/^g/,this.mtllib=/^mtllib /,this.usemtl=/^usemtl /,this.smooth=/^s /,this.vertexPattern=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.normalPattern=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.uvPattern=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.facePattern1=/f\s+(([\d]{1,}[\s]?){3,})+/,this.facePattern2=/f\s+((([\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,this.facePattern3=/f\s+((([\d]{1,}\/[\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,this.facePattern4=/f\s+((([\d]{1,}\/\/[\d]{1,}[\s]?){3,})+)/}return r.prototype._loadMTL=function(t,r,s){var a=e.Tools.BaseUrl+r+t;e.Tools.LoadFile(a,s,void 0,void 0,!1,(function(){console.warn("Error - Unable to load "+a)}))},r.prototype.importMesh=function(e,t,r,s,a,n,i){var o=this._parseSolid(e,t,r,s);return a&&o.forEach((function(e){a.push(e)})),!0},r.prototype.load=function(e,t,r){return this.importMesh(null,e,t,r,null,null,null)},r.prototype._parseSolid=function(s,a,n,i){for(var o,l=[],u=[],p=[],h=[],m=[],f=[],c=[],d=[],v=[],x=0,g=!1,T=[],_=[],F=[],I=[],P="",b="",y=new t,w=1,L=!0,O=function(e,t){e[t[0]]||(e[t[0]]={normals:[],idx:[]});var r=e[t[0]].normals.indexOf(t[1]);return-1===r?-1:e[t[0]].idx[r]},E=function(e,t){e[t[0]]||(e[t[0]]={normals:[],idx:[],uv:[]});var r=e[t[0]].normals.indexOf(t[1]);return 1!=r&&t[2]==e[t[0]].uv[r]?e[t[0]].idx[r]:-1},M=function(e,t,s,a,n,i){var o;o=r.OPTIMIZE_WITH_UV?E(v,[e,s,t]):O(v,[e,s]),-1==o?(m.push(f.length),f.push(a),c.push(n),d.push(i),v[e].normals.push(s),v[e].idx.push(x++),r.OPTIMIZE_WITH_UV&&v[e].uv.push(t)):m.push(o)},A=function(){for(var e=0;e<f.length;e++)T.push(f[e].x,f[e].y,f[e].z),_.push(d[e].x,d[e].y,d[e].z),F.push(c[e].x,c[e].y);f=[],d=[],c=[],v=[],x=0},V=function(e,t){t+1<e.length&&(I.push(e[0],e[t],e[t+1]),t+=1,V(e,t))},C=function(){h.length>0&&(o=h[h.length-1],A(),m.reverse(),o.indices=m.slice(),o.positions=T.slice(),o.normals=_.slice(),o.uvs=F.slice(),m=[],T=[],_=[],F=[])},B=n.split("\n"),N=0;N<B.length;N++){var U,k=B[N].trim();if(0!==k.length&&"#"!==k.charAt(0))if(null!==(U=this.vertexPattern.exec(k)))l.push(new e.Vector3(parseFloat(U[1]),parseFloat(U[2]),parseFloat(U[3])));else if(null!==(U=this.normalPattern.exec(k)))u.push(new e.Vector3(parseFloat(U[1]),parseFloat(U[2]),parseFloat(U[3])));else if(null!==(U=this.uvPattern.exec(k)))p.push(new e.Vector2(parseFloat(U[1]),parseFloat(U[2])));else if(null!==(U=this.facePattern3.exec(k)))!(function(e,t){V(e,t);for(var r=0;r<I.length;r++){var s=I[r].split("/"),a=parseInt(s[0])-1,n=parseInt(s[1])-1,i=parseInt(s[2])-1;M(a,n,i,l[a],p[n],u[i])}I=[]})(U[1].trim().split(" "),1);else if(null!==(U=this.facePattern4.exec(k)))!(function(t,r){V(t,r);for(var s=0;s<I.length;s++){var a=I[s].split("//"),n=parseInt(a[0])-1,i=parseInt(a[1])-1;M(n,1,i,l[n],e.Vector2.Zero(),u[i])}I=[]})(U[1].trim().split(" "),1);else if(null!==(U=this.facePattern2.exec(k)))!(function(t,r){V(t,r);for(var s=0;s<I.length;s++){var a=I[s].split("/"),n=parseInt(a[0])-1,i=parseInt(a[1])-1;M(n,i,0,l[n],p[i],e.Vector3.Up())}I=[]})(U[1].trim().split(" "),1);else if(null!==(U=this.facePattern1.exec(k)))!(function(t,r){V(t,r);for(var s=0;s<I.length;s++){var a=parseInt(I[s])-1;M(a,0,0,l[a],e.Vector2.Zero(),e.Vector3.Up())}I=[]})(U[1].trim().split(" "),1);else if(this.group.test(k)||this.obj.test(k)){var S={name:k.substring(2).trim(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,materialName:""};C(),h.push(S),g=!0,L=!0,w=1}else if(this.usemtl.test(k)){if(P=k.substring(7).trim(),!L){C();var S={name:"_mm"+w.toString(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,materialName:P};w++,h.push(S)}g&&L&&(h[h.length-1].materialName=P,L=!1)}else this.mtllib.test(k)?b=k.substring(7).trim():this.smooth.test(k)||console.log("Unhandled expression at line : "+k)}g&&(o=h[h.length-1],m.reverse(),A(),o.indices=m,o.positions=T,o.normals=_,o.uvs=F),g||(m.reverse(),A(),h.push({name:e.Geometry.RandomId(),indices:m,positions:T,normals:_,uvs:F,materialName:P}));for(var Z=[],j=new Array,H=0;H<h.length;H++){if(s&&h[H].name)if(s instanceof Array){if(-1==s.indexOf(h[H].name))continue}else if(h[H].name!==s)continue;o=h[H];var W=new e.Mesh(h[H].name,a);j.push(h[H].materialName);var Y=new e.VertexData;Y.positions=o.positions,Y.normals=o.normals,Y.uvs=o.uvs,Y.indices=o.indices,Y.applyToMesh(W),Z.push(W)}return""!==b&&this._loadMTL(b,i,(function(e){y.parseMTL(a,e,i);for(var t=0;t<y.materials.length;t++){for(var r,s=0,n=[];(r=j.indexOf(y.materials[t].name,s))>-1;)n.push(r),s=r+1;if(-1==r&&0==n.length)y.materials[t].dispose();else for(var o=0;o<n.length;o++)Z[n[o]].material=y.materials[t]}})),Z},r.OPTIMIZE_WITH_UV=!1,r})();e.OBJFileLoader=r,e.SceneLoader&&e.SceneLoader.RegisterPlugin(new r)})(BABYLON||(BABYLON={}));
>>>>>>> v3.1.0
